<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="WEB-INF/templates/template.xhtml">

    <ui:define name="title">#{bundle['company.title']}</ui:define>
    <ui:define name="content">

        <f:metadata>
            <f:viewAction action="#{companiesBean.displayOneCompany}"/>
        </f:metadata>

        <div class="ui-g">
            <div class="ui-g-12">
                <div class="card card-w-title">
                    <h1>Company Details</h1>

                    <p:growl id="msgs"/>

                    <h:form>
                        <p:panelGrid columns="4" layout="flex"
                                     columnClasses="p-col-12 p-md-3 p-xl-2, p-col-12 p-md-9 p-xl-4, p-col-12 p-md-3 p-xl-2, p-col-12 p-md-9 p-xl-4"
                                     contentStyleClass="ui-fluid" styleClass="ui-panelgrid-blank form-group">

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputText id="domainName" value="#{companiesBean.companiesEntity.domainName}">
                                    <f:validator validatorId="companyDomainValidator"/>
                                </p:inputText>
                                <label>#{bundle['company.domainName']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputText id="labelCompany" value="#{companiesBean.companiesEntity.label}"
                                             required="true"
                                             requiredMessage="#{bundle['company.labelNotValid']}"/>
                                <label>#{bundle['company.labelName']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputTextarea id="companyDescription"
                                                 value="#{companiesBean.companiesEntity.description}"/>
                                <label>#{bundle['company.description']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputMask id="companyVAT" value="#{companiesBean.companiesEntity.vatNumber}"
                                             mask="BE-9999999999">
                                    <f:validator validatorId="companyVATValidator"/>
                                </p:inputMask>
                                <label>#{bundle['company.vatNumber']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputMask id="companyBankAccount"
                                             value="#{companiesBean.companiesEntity.bankAccount}"
                                             mask="BE-99999999999999">
                                    <f:validator validatorId="companyBankAccountValidator"/>
                                </p:inputMask>
                                <label>#{bundle['company.bankAccount']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:autoComplete id="branchActivitiesDisplay" dropdown="true"
                                                value="#{companiesBean.companiesEntity.branchActivitiesByIdBranchActivities}"
                                                completeMethod="#{companiesBean.completeBranchActivities}"
                                                var="branchActivities"
                                                itemLabel="#{branchActivities.label}"
                                                itemValue="#{branchActivities}"
                                                converter="branchActivitiesConverter"
                                                scrollHeight="250"
                                                placeholder="#{bundle['company.chooseBranchActivity']}"/>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:autoComplete id="companyTypesDisplay" dropdown="true"
                                                value="#{companiesBean.companiesEntity.companyTypesByIdCompanyTypes}"
                                                required="true"
                                                requiredMessage="#{bundle['company.companiesTypeNotValid']}"
                                                completeMethod="#{companiesBean.completeCompanyTypes}"
                                                var="companyTypes"
                                                itemLabel="#{companyTypes.label}"
                                                itemValue="#{companyTypes}"
                                                converter="companyTypesConverter"
                                                scrollHeight="250"
                                                placeholder="#{bundle['company.chooseCompanyType']}"/>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputNumber id="employeesNumber"
                                               value="#{companiesBean.companiesEntity.employeesNumber}"
                                               validatorMessage="#{bundle['company.employeesNumberNotValid']}">
                                    <f:validateLongRange minimum="0"/>
                                </p:inputNumber>
                                <label>#{bundle['company.employessNumber']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputNumber id="revenue" value="#{companiesBean.companiesEntity.revenue}"
                                               validatorMessage="#{bundle['company.employeesNumberNotValid']}">
                                    <f:validateLongRange minimum="0"/>
                                </p:inputNumber>
                                <label>#{bundle['company.revenue']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputNumber id="companyAnnualSales"
                                               value="#{companiesBean.companiesEntity.annualSales}"
                                               validatorMessage="#{bundle['company.employeesNumberNotValid']}">
                                    <f:validateLongRange minimum="0"/>
                                </p:inputNumber>
                                <label>#{bundle['company.annualSales']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputMask id="companyPhoneNumber"
                                             value="#{companiesBean.companiesEntity.phoneNumber}"
                                             mask="+32 99999999">
                                    <f:validator validatorId="contactPhoneNumberValidator"/>
                                </p:inputMask>
                                <label>#{bundle['contacts.phoneNumberLabel']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputText id="companyEmail" value="#{companiesBean.companiesEntity.email}">
                                    <f:validator validatorId="companyEmailValidator"/>
                                </p:inputText>
                                <label>#{bundle['contacts.emailLabel']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                                <p:inputText id="linkedinPage" value="#{companiesBean.companiesEntity.linkedInPage}">
                                    <f:validator validatorId="linkedinPageValidator"/>
                                </p:inputText>
                                <label>#{bundle['company.linkedInPage']}</label>
                            </h:panelGroup>


                            <p:calendar id="creationDate" value="#{companiesBean.companiesEntity.creationDate}"
                                        pattern="dd/MM/yyyy" maxdate="#{companiesBean.now}"
                                        placeholder="#{bundle['company.creationDate']}" style="margin-bottom:10px;">
                                <!--                                <f:validator validatorId="dateValidator"/>-->
                                <f:converter converterId="localDateTimeConverter"/>
                            </p:calendar>


                            <p:calendar id="closingDate" value="#{companiesBean.companiesEntity.closingDate}"
                                        pattern="dd/MM/yyyy" maxdate="#{companiesBean.now}"
                                        placeholder="#{bundle['company.closingDate']}" style="margin-bottom:10px;">
                                <f:converter converterId="localDateTimeConverter"/>
                            </p:calendar>

                        </p:panelGrid>

                        <div align="right">
                            <p:commandButton value="valider"
                                             action="#{companiesBean.updateCompanies}"
                                             icon="ui-icon-check"
                                             update="@(form)" process="@this"
                                             onclick="PF('companyModal').close();"/>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
