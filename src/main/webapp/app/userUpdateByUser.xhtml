<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="../WEB-INF/templates/template.xhtml">

    <ui:define name="title">#{bundle['user.updateByUser']}</ui:define>
    <ui:define name="content">


        <p:growl id="msg" life="2000"></p:growl>


        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-4">
                <div class="card card-w-title">
                    <h1>#{bundle['user.logs']}</h1>
                    <p:growl id="msgs" skipDetailIfEqualsSummary="true" life="10000"/>
                    <h:form id="usersUpdateForm">
                        <p:panelGrid columns="4" layout="flex"
                                     id="userUpdateByUser"
                                     columnClasses="p-col-12 p-md-3 p-xl-2, p-col-12 p-md-9 p-xl-4, p-col-12 p-md-3 p-xl-2, p-col-12 p-md-9 p-xl-4"
                                     contentStyleClass="ui-fluid" styleClass="ui-panelgrid-blank form-group">


                            <h:panelGroup styleClass="md-inputfield"
                            >
                                <label style="font-weight: bold">#{bundle['user.username']}: #{usersBean.usersEntity.username}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield mgin-top">
                                <label style="font-weight: bold">#{bundle['firstname']}: #{usersBean.usersEntity.firstname}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield mgin-top"
                            >
                                <label style="font-weight: bold">#{bundle['lastname']}: #{usersBean.usersEntity.lastname}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield mgin-top"
                            >
                                <label style="font-weight: bold">#{bundle['email']}: #{usersBean.usersEntity.email}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield mgin-top"
                            >
                                <p:password id="password" value="#{usersBean.password1}" match="password2"
                                            autocomplete="false"
                                            validatorMessage="#{bundle['users.regexPassError']}">
                                    <p:ajax process="@form"
                                            update="msgPass1 usersUpdateForm:update"
                                            event="keyup" resetValues="true"/>
                                    <f:validator validatorId="userUpdatePasswordValidator"></f:validator>
                                </p:password>
                                <label>#{bundle['user.password']}</label>
                                <p:message id="msgPass1" for="password"/>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield"
                            >
                                <p:password id="password2" value="#{usersBean.password2}" label="password2"
                                            validatorMessage="#{bundle['matchPasswird']}"/>
                                <p:ajax process="@form"
                                        update="msgPass1 usersUpdateForm:update"
                                        event="keyup" resetValues="true"/>
                                <label for="password2">#{bundle['user.password2']}</label>
                            </h:panelGroup>

                            <h:panelGroup styleClass="md-inputfield mgin-top"
                            >
                                <p:inputText id="email" value="#{usersBean.usersEntity.email}" required="true"
                                             requiredMessage="#{bundle['mailEmpty']}"
                                             validatorMessage="#{bundle['contacts.emailNotValid']}">
                                    <p:ajax process="@form"
                                            update="msgMail usersUpdateForm:update"
                                            event="keyup" resetValues="true"/>
                                    <f:validator validatorId="userEmailValidator"></f:validator>
                                </p:inputText>
                                <label for="email">#{bundle['email']}</label>
                                <p:message id="msgMail" for="email"/>
                            </h:panelGroup>

                            <p:messages id="pass1" closable="true" display="message"/>


                        </p:panelGrid>

                        <div align="right">
                            <p:commandButton value="#{bundle['validate']}" id="update"
                                             disabled="#{facesContext.validationFailed or empty usersBean.usersEntity.email }"
                                             action="#{usersBean.userUpdateByUser(usersBean.usersEntity)}"
                                             update="@(form)"/>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>


    </ui:define>
</ui:composition>