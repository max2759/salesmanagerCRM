<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface name="createContacts"
              displayName="#{bundle['contacts.create']}"
              shortDescription="#{bundle['contacts.create']}"/>
<cc:implementation>
    <f:view>
        <p:dialog
                header="Contacts"
                modal="true"
                id="contactsModal"
                widgetVar="contactsWidgetModal" responsive="true">
            <h:form>
                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">

                    <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                        <p:inputText id="contactFirstName" value="#{contactsBean.contactsEntity.firstname}"
                                     required="true" requiredMessage="#{bundle['contacts.firstnameNotValid']}"/>
                        <label>#{bundle['contacts.firstname']}</label>
                        <p:ajax update="validateContacts msg" event="keyup"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                        <p:inputText id="contactLastName" value="#{contactsBean.contactsEntity.lastname}"
                                     required="true" requiredMessage="#{bundle['contacts.lastnameNotValid']}"/>
                        <label>#{bundle['contacts.lastname']}</label>
                        <p:ajax update="validateContacts msg" event="keyup"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                        <p:inputText id="contactEmail" value="#{contactsBean.contactsEntity.email}">
                            <f:validator validatorId="contactEmailValidator"/>
                        </p:inputText>
                        <label>#{bundle['contacts.emailLabel']}</label>
                    </h:panelGroup>

                    <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                        <p:autoComplete id="jobTitlesDisplay" dropdown="true"
                                        value="#{contactsBean.contactsEntity.jobTitlesByIdJobTitles}"
                                        completeMethod="#{jobtitlesBean.completeJobTitles}"
                                        var="jobtitles"
                                        itemLabel="#{jobtitles.label}"
                                        itemValue="#{jobtitles}"
                                        converter="jobTitlesConverter"
                                        scrollHeight="250" placeholder="#{bundle['contacts.chooseJobTitles']}"/>
                    </h:panelGroup>


                    <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                        <p:inputMask id="phoneNumber" value="#{contactsBean.contactsEntity.phoneNumber}"
                                     mask="+32 999999999">
                            <f:validator validatorId="contactPhoneNumberValidator"/>
                        </p:inputMask>
                        <label>#{bundle['contacts.phoneNumberLabel']}</label>
                    </h:panelGroup>

                    <h:panelGroup styleClass="md-inputfield" style="margin-bottom:10px;">
                        <p:autoComplete id="contactTypeDisplay" dropdown="true"
                                        value="#{contactsBean.contactsEntity.contactTypesByIdContactTypes}"
                                        completeMethod="#{contactTypesBean.completeContactType}"
                                        var="contactType"
                                        itemLabel="#{contactType.label}"
                                        itemValue="#{contactType}"
                                        converter="contactTypesConverter"
                                        required="true"
                                        requiredMessage="#{bundle['contacts.ContactTypeNotValid']}"
                                        scrollHeight="250" placeholder="#{bundle['contacts.chooseContactType']}"
                        />
                        <p:ajax update="validateContacts msg" event="keyup"/>
                    </h:panelGroup>
                </p:panelGrid>

                <div align="right">
                    <p:messages id="msg" closable="true" display="message"/>
                    <p:commandButton value="#{bundle['validate']}"
                                     action="#{contactsBean.addContact}"
                                     id="validateContacts"
                                     disabled="#{empty contactsBean.contactsEntity.firstname or contactsBean.contactsEntity.firstname.length() le 1 or empty contactsBean.contactsEntity.lastname or contactsBean.contactsEntity.lastname.length() le 1 }"
                                     icon="ui-icon-check"
                                     update="@(form) msgs"
                                     oncomplete="PF('contactsWidgetModal').hide();"/>
                </div>
            </h:form>
        </p:dialog>
    </f:view>
</cc:implementation>
</html>
