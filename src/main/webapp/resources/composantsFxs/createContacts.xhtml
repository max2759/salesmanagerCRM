<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface name="createContacts"
              displayName="#{bundle['contacts.create']}"
              shortDescription="#{bundle['contacts.create']}"/>
<cc:implementation>
    <f:view>
        <p:dialog
                header="Contacts"
                modal="true"
                id="contactsModal"
                widgetVar="contactsWidgetModal" responsive="true">
            <h:form>
                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">

                    <p:outputLabel value="#{bundle['contacts.firstname']}" for="contactFirstName"/>
                    <p:inputText id="contactFirstName" value="#{contactsBean.contactsEntity.firstname}"
                                 required="true" requiredMessage="#{bundle['contacts.firstnameNotValid']}"
                                 placeholder="#{bundle['contacts.firstname']}">
                        <p:ajax update="validateContacts msg" event="keyup"/>
                    </p:inputText>

                    <p:outputLabel value="#{bundle['contacts.lastname']}" for="contactLastName"/>
                    <p:inputText id="contactLastName" value="#{contactsBean.contactsEntity.lastname}"
                                 required="true" requiredMessage="#{bundle['contacts.lastnameNotValid']}"
                                 placeholder="#{bundle['contacts.lastname']}">
                        <p:ajax update="validateContacts msg" event="keyup"/>
                    </p:inputText>

                    <p:outputLabel for="contactTypeDisplay" value="#{bundle['contacts.chooseContactType']}"/>
                    <p:selectOneMenu id="contactTypeDisplay"
                                     value="#{contactsBean.contactsEntity.contactTypesByIdContactTypes}"
                                     converter="contactTypesConverter" required="true"
                                     requiredMessage="#{bundle['contacts.ContactTypeNotValid']}">
                        <f:selectItems value="#{contactTypesBean.contactTypesEntities}" var="contactType"
                                       itemValue="#{contactType}" itemLabel="#{contactType.label}"/>
                        <p:ajax update="validateContacts msg" event="keyup"/>
                    </p:selectOneMenu>

                    <p:outputLabel for="contactEmail" value="#{bundle['contacts.emailLabel']}"/>
                    <p:inputText id="contactEmail" value="#{contactsBean.contactsEntity.email}"
                                 placeholder="#{bundle['contacts.emailLabel']}">
                        <f:validator validatorId="contactEmailValidator"/>
                    </p:inputText>

                    <p:outputLabel for="jobTitlesDisplay" value="#{bundle['contacts.chooseJobTitles']}"/>
                    <p:autoComplete id="jobTitlesDisplay" dropdown="true"
                                    value="#{contactsBean.contactsEntity.jobTitlesByIdJobTitles}"
                                    completeMethod="#{jobtitlesBean.completeJobTitles}"
                                    var="jobtitles"
                                    itemLabel="#{jobtitles.label}"
                                    itemValue="#{jobtitles}"
                                    converter="jobTitlesConverter"
                                    scrollHeight="250" placeholder="#{bundle['contacts.chooseJobTitles']}"/>

                    <p:outputLabel for="phoneNumber" value="#{bundle['contacts.phoneNumberLabel']}"/>
                    <p:inputMask id="phoneNumber" value="#{contactsBean.contactsEntity.phoneNumber}"
                                 mask="+32 999999999" placeholder="#{bundle['contacts.phoneNumberLabel']}">
                        <f:validator validatorId="contactPhoneNumberValidator"/>
                    </p:inputMask>

                </p:panelGrid>

                <div align="right">
                    <p:messages id="msg" closable="true" display="message"/>
                    <p:commandButton value="#{bundle['validate']}"
                                     action="#{contactsBean.addContact}"
                                     id="validateContacts"
                                     disabled="#{empty contactsBean.contactsEntity.firstname or contactsBean.contactsEntity.firstname.length() le 1 or empty contactsBean.contactsEntity.lastname or contactsBean.contactsEntity.lastname.length() le 1 }"
                                     icon="ui-icon-check"
                                     update="@(form) msgs"
                                     oncomplete="PF('contactsWidgetModal').hide();"/>
                </div>
            </h:form>
        </p:dialog>
    </f:view>
</cc:implementation>
</html>
